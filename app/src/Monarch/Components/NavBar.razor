@using Monarch.Models

<nav class="navbar">
    <div class="navbar-content">
        <div class="navbar-left">
            <a href="/" class="logo-link">
                <div class="logo-container">
                    <img src="Monarch Logo.png" alt="Monarch Logo" class="logo" />
                </div>
            </a>
            <span class="dashboard-title">Monarch</span>
        </div>

        <div class="navbar-right">
            <button href="/admin" class="icon-btn console-btn" title="Admin Console" aria-label="Admin Console" @onclick="ToggleAdmin">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path
                        d="M20 3H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h3v2h10v-2h3c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 13H4V5h16v11zm-2-9H6v2h12V7zm0 4H6v2h12v-2z" />
                </svg>
            </button>
            <a href="/profile" class="icon-btn user-btn" title="User Profile" aria-label="User Profile">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
            </a>
        </div>
    </div>
</nav>

@if (toggleAdmin)
{
    <div class="admin-overlay" @onclick="CloseAdmin">
        <div class="admin-card card shadow" @onclick:stopPropagation>
            <div class="card-header border-bottom-0 pb-0 d-flex justify-content-between align-items-center">
                <ul class="nav nav-tabs card-header-tabs">
                    <li class="nav-item">
                        <button class="nav-link @(activeTab == TabNotification ? "active" : "")"
                                @onclick="() => SwitchTab(TabNotification)">
                            Notification Settings
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link @(activeTab == TabUser ? "active" : "")"
                                @onclick="() => SwitchTab(TabUser)">
                            User Settings
                        </button>
                    </li>
                </ul>
                <button class="btn btn-sm btn-outline-light no-focus" @onclick="CloseAdmin">
                    âœ•
                </button>
            </div>

            <div class="card-body">
                @if (activeTab == TabNotification)
                {
                    <form>
                        <input type="checkbox" id="jiraWarn" class="notiBox"/>
                        <label for="jiraWarn">Create Jira when application status reaches <span class="warning">Warning</span></label>
                        <br />
                        <input type="checkbox" id="jiraDown" class="notiBox"/>
                        <label for="jiraDown">Create Jira when application status reaches <span class="down">Down</span></label>
                        <br />
                        <input type="checkbox" id="slackWarn" class="notiBox"/>
                        <label for="slackWarn">Create Slack when application status reaches <span class="warning">Warning</span></label>
                        <br />
                        <input type="checkbox" id="slackDown" class="notiBox"/>
                        <label for="slackDown">Create Slack when application status reaches <span class="down">Down</span></label>
                        <br />
                        <button type="submit">Apply Changes</button>
                    </form>
                }
                else if (activeTab == TabUser)
                {
                    <form>
                        <input type="checkbox" id="app1" class="userBox"/>
                        <label for="app1">App 1</label>

                        <input type="checkbox" id="app2" class="userBox"/>
                        <label for="app2">App 2</label>

                        <input type="checkbox" id="app3" class="userBox"/>
                        <label for="app3">App 3</label>

                        <input type="checkbox" id="app4" class="userBox"/>
                        <label for="app4">App 4</label>

                        <br />

                        <input type="checkbox" id="app5" class="userBox"/>
                        <label for="app5">App 5</label>

                        <input type="checkbox" id="app6" class="userBox"/>
                        <label for="app6">App 6</label>

                        <input type="checkbox" id="app7" class="userBox"/>
                        <label for="app7">App 7</label>

                        <input type="checkbox" id="app8" class="userBox"/>
                        <label for="app8">App 8</label>

                        <br />

                        <input type="checkbox" id="app9" class="userBox"/>
                        <label for="app9">App 9</label>

                        <input type="checkbox" id="app10" class="userBox"/>
                        <label for="app10">App 10</label>

                        <input type="checkbox" id="app11" class="userBox"/>
                        <label for="app11">App 11</label>

                        <input type="checkbox" id="app12" class="userBox"/>
                        <label for="app12">App 12</label>

                        <br />


                        <input type="checkbox" id="app13" class="userBox"/>
                        <label for="app13">App 13</label>

                        <input type="checkbox" id="app14" class="userBox"/>
                        <label for="app14">App 14</label>

                        <input type="checkbox" id="app15" class="userBox"/>
                        <label for="app15">App 15</label>

                        <input type="checkbox" id="app16" class="userBox"/>
                        <label for="app16">App 16</label>

                        <br />

                        <input type="checkbox" id="app17" class="userBox"/>
                        <label for="app17">App 17</label>

                        <input type="checkbox" id="app18" class="userBox"/>
                        <label for="app18">App 18</label>

                        <input type="checkbox" id="app19" class="userBox"/>
                        <label for="app19">App 19</label>

                        <input type="checkbox" id="app20" class="userBox"/>
                        <label for="app20">App 20</label>

                        <br />


                        <button type="submit">Apply Changes</button>
                    </form>
                }
            </div>
        </div>
    </div>
}


<style>
    .navbar {
        background-color: #3D3D3D;
        border-bottom: 1px solid #4D4D4D;
        padding: 0 24px;
        height: 64px;
        display: flex;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .navbar-content {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .navbar-left {
        display: flex;
        align-items: center;
        gap: 16px;
    }

    .logo-link {
        text-decoration: none;
        display: block;
    }

    .logo-container {
        width: 48px;
        height: 48px;
        background-color: transparent;
        border: none;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 6px;
        cursor: pointer;
    }

    .logo-link:hover .logo-container {
        opacity: 0.8;
    }

    .logo {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    .dashboard-title {
        color: #FFFFFF;
        font-size: 20px;
        font-weight: 400;
        letter-spacing: 0.02em;
    }

    .navbar-right {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .icon-btn {
        background: transparent;
        border: none;
        color: #FFFFFF;
        padding: 8px;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.2s ease;
        text-decoration: none;
    }

    .icon-btn:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .icon-btn svg {
        display: block;
    }

    .user-btn {
        width: 36px;
        height: 36px;
        border-radius: 50%;
    }

    .admin-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    animation: fadeIn 0.2s ease-in;
}

.admin-card {
    width: 420px;
    max-width: 90vw;
    background-color: #2D2D2D;
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.1);
    animation: popIn 0.2s ease-out;
}

.admin-card .nav-link.active {
    border-color: #fff;
    border-bottom: 2px solid #fff;
}

.no-focus:focus,
.no-focus:focus-visible,
.no-focus:active {
    outline: none !important;
    box-shadow: none !important;
}

.warning{
    color: yellow;
}

.down{
    color: red;
}

.notiBox{
    margin: 0 0 15px 0;
}

.userBox{
    margin: 0 -15px 15px 0;
    width: 15%;
}

</style>

@code {
    private bool toggleAdmin = false;
    private const string TabNotification = "notification";
    private const string TabUser = "user";
    private string activeTab = TabNotification;

    private void ToggleAdmin() => toggleAdmin = !toggleAdmin;
    private void CloseAdmin() => toggleAdmin = false;
    private void SwitchTab(string tab) => activeTab = tab;
}
